# Data Types

Whenever possible, After Effects presents plug-ins with opaque data types, and provides accessor functions for manipulating them. For example, video frames are represented using the opaque AEGP_WorldH. While in some cases it might be more efficient to simply modify the underlying structure, by maintaining the opaqueness of the data types we allow for changes to our implementation without making you recompile (and redistribute) your plug-ins.

---

## AEGP API Data Types

| **Type**                   | **Describes**                                                                                                                                                                                                                                                                             | **Manage Using**                                                                                                                                                                                                                      |
|----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `AEGP_MemHandle`           | This structure contains more than just the referenced memory. So it should not be dereferenced directly.<br/>Use `AEGP_LockMemHandle` in the AEGP Memory Suite to get a pointer to the memory referenced by the `AEGP_MemHandle`.<br/>And of course, unlock it when you’re done.          | [AEGP Memory Suite](aegp-suites.md#aegps-aegp-suites-memory-suite)                                                                                                                                                                    |
| `AEGP_ProjectH`            | The current After Effects project. Projects are a set of elements arranged hierarchically in a tree to preserve semantic relationships.<br/>Interior nodes of the tree are folders.<br/>As of CS6, there will only ever be one open project.                                              | [AEGP Project Suite](aegp-suites.md#aegps-aegp-suites-project-suite)                                                                                                                                                                  |
| `AEGP_ItemH`               | An abstraction describing any element of a project, including folders. An item is anything that can be selected.<br/>Since multiple object types can be selected, we treat them as AEGP_ItemHs until more specificity is required.                                                        | [AEGP Item Suite](aegp-suites.md#aegps-aegp-suites-item-suite)                                                                                                                                                                        |
| `AEGP_Collection2H`        | A set of selected items.                                                                                                                                                                                                                                                                  | [AEGP Collection Suite](aegp-suites.md#aegps-aegp-suites-collection-suite)                                                                                                                                                            |
| `AEGP_CompH`               | A composition is a sequence of renderable items that, together, produce output.<br/>A composition exists over a time interval.<br/>Multiple compositions can exist within one project.                                                                                                    | [AEGP Composition Suite](aegp-suites.md#aegps-aegp-suites-composition-suite)                                                                                                                                                          |
| `AEGP_FootageH`            | An item that can be rendered. Folders and compositions are the only items that are not footage.                                                                                                                                                                                           | [AEGP Footage Suite](aegp-suites.md#aegps-aegp-suites-footage-suite)                                                                                                                                                                  |
| `AEGP_LayerH`              | An element of a composition. Layers are rendered in sequence, which allows for occlusions.<br/>Solids, text, paint, cameras, lights, images, and image sequences are all represented as layers.<br/><br/>Layers may be defined over sub-intervals of the composition’s time interval.     | [AEGP Layer Suite](aegp-suites.md#aegps-aegp-suites-layer-suite)                                                                                                                                                                      |
| `AEGP_WorldH`              | A frame of pixels.                                                                                                                                                                                                                                                                        | [AEGP World Suite](aegp-suites.md#aegps-aegp-suites-world-suite)                                                                                                                                                                      |
| `AEGP_EffectRefH`          | An effect applied to a layer. An effect is a function that takes as its argument a layer (and possibly other parameters)<br/>and returns an altered version of the layer for rendering.                                                                                                   | [AEGP Effect Suite](aegp-suites.md#aegps-aegp-suites-effect-suite)                                                                                                                                                                    |
| `AEGP_StreamRefH`          | Any [parameter stream](aegp-suites.md#aegps-aegp-suites-diving-into-streams) attached to a layer, in a composition.<br/>See the description of `AEGP_GetNewLayerStream` from [AEGP_StreamSuite5](aegp-suites.md#aegps-aegp-suites-aegp-streamsuite) for a full list of stream types.      | [AEGP Stream Suite](aegp-suites.md#aegps-aegp-suites-stream-suite),<br/>[AEGP Dynamic Stream Suite](aegp-suites.md#aegps-aegp-suites-dynamic-stream-suite)<br/>[AEGP Keyframe Suite](aegp-suites.md#aegps-aegp-suites-keyframe-suite) |
| `AEGP_MaskRefH`            | A mask applied to a layer. An AEGP_MaskRefH is used to access details about the mask stream, not the specific points which constitute the mask.<br/>A mask is a rasterized path (sequence of vertices) that partitions a layer into two pieces, allowing each to be rendered differently. | [AEGP Mask Suite](aegp-suites.md#aegps-aegp-suites-mask-suite)                                                                                                                                                                        |
| `AEGP_MaskOutlineValH`     | The specific points which constitute the mask.<br/>The points in a mask outline are ordered, and the mask need not be closed.                                                                                                                                                             | [AEGP Mask Outline Suite](aegp-suites.md#aegps-aegp-suites-mask-outline-suite)                                                                                                                                                        |
| `AEGP_TextDocumentH`       | Represents the actual text associated with a text layer.                                                                                                                                                                                                                                  | [AEGP Text Document Suite](aegp-suites.md#aegps-aegp-suites-text-document-suite)                                                                                                                                                      |
| `AEGP_TextOutlinesH`       | A reference to all the paths that make up the outlines of a given text layer.                                                                                                                                                                                                             | [AEGP Text Layer Suite](aegp-suites.md#aegps-aegp-suites-text-layer-suite)                                                                                                                                                            |
| `AEGP_MarkerVal`           | The data associated with a given timeline marker.                                                                                                                                                                                                                                         | [AEGP Marker Suite](aegp-suites.md#aegps-aegp-suites-marker-suite)                                                                                                                                                                    |
| `AEGP_PersistentBlobH`     | A “blob” of data containing the current preferences.                                                                                                                                                                                                                                      | [AEGP Persistent Data Suite](aegp-suites.md#aegps-aegp-suites-persistent-data-suite)                                                                                                                                                  |
| `AEGP_RenderOptionsH`      | The settings associated with a render request.                                                                                                                                                                                                                                            | [AEGP Render Options Suite](aegp-suites.md#aegps-aegp-suites-render-options-suite)                                                                                                                                                    |
| `AEGP_LayerRenderOptionsH` | The settings associated with a layer render request.                                                                                                                                                                                                                                      | [AEGP Layer Render Options Suite](aegp-suites.md#aegps-aegp-suites-aegp-layerrenderoptionssuite)                                                                                                                                      |
| `AEGP_FrameReceiptH`       | A reference to a rendered frame.                                                                                                                                                                                                                                                          | [AEGP Render Suite](aegp-suites.md#aegps-aegp-suites-render-suite)                                                                                                                                                                    |
| `AEGP_RQItemRefH`          | An item in the render queue.                                                                                                                                                                                                                                                              | [AEGP Render Queue Suite](aegp-suites.md#aegps-aegp-suites-render-queue-suite)<br/>[AEGP Render Queue Item Suite](aegp-suites.md#aegps-aegp-suites-render-queue-item-suite)                                                           |
| `AEGP_OutputModuleRefH`    | An output module, attached to a specific AEGP_RQItemRef in the render queue.                                                                                                                                                                                                              | [AEGP Output Module Suite](aegp-suites.md#aegps-aegp-suites-output-module-suite)                                                                                                                                                      |
| `AEGP_SoundDataH`          | The [audio settings](aegp-suites.md#aegps-aegp-suites-sound-data-suite) used for a given layer.                                                                                                                                                                                           | [AEGP Sound Data Suite](aegp-suites.md#aegps-aegp-suites-sound-data-suite)                                                                                                                                                            |
| `AEGP_RenderLayerContextH` | State information at the time of a render request, sent to an Artisan by After Effects.                                                                                                                                                                                                   | [AEGP Canvas Suite](../artisans/artisan-data-types.md#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                   |
| `AEGP_RenderReceiptH`      | Used by Artisans when rendering.                                                                                                                                                                                                                                                          | [AEGP Canvas Suite](../artisans/artisan-data-types.md#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                   |

---

## Nasty, Brutish, and Short

Information about layers, streams, and many other items doesn’t survive long; it’s often invalidated by user activity.

Anything that modifies the quantity (not quality) of items will invalidate references to those items; adding a keyframe to a stream invalidates references to that stream, but forcing a layer to be rendered doesn’t invalidate references to it. Do not cache layer pixels.

Caching references between calls to a specific hook function within your plug-in is not recommended; acquire information when you need it, and forget (release) it as soon as possible.

---

## Were You Just Going To Leave That Data Lying Around?

When you ask After Effects to populate and return handles to data structures, it’s important that you clean up after yourself. For the following data types, you must call the appropriate disposal routines.

---

## Data Types Requiring Disposal

| **Data Type**              | **Disposal function**                                                                                                                                                                                                                                                                       |
|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `AEGP_Collection2H`        | `AEGP_DisposeCollection`, from [AEGP_CollectionSuite2](aegp-suites.md#aegps-aegp-suites-aegp-collectionsuite)                                                                                                                                                                               |
| `AEGP_FootageH`            | `AEGP_DisposeFootage`, from [AEGP_FootageSuite5](aegp-suites.md#aegps-aegp-suites-aegp-footagesuite)                                                                                                                                                                                        |
| `AEGP_WorldH`              | `AEGP_Dispose`, from [AEGP_WorldSuite3](aegp-suites.md#aegps-aegp-suites-aegp-worldsuite)<br/><br/>Or `AEGP_DisposeTexture`, from [AEGP_CanvasSuite8](../artisans/artisan-data-types.md#artisans-artisan-data-types-aegp-canvassuite), if layer texture created using `AEGP_RenderTexture`) |
| `AEGP_EffectRefH`          | `AEGP_DisposeEffect`, from [AEGP_EffectSuite4](aegp-suites.md#aegps-aegp-suites-aegp-effectsuite)                                                                                                                                                                                           |
| `AEGP_MaskRefH`            | `AEGP_DisposeMask`, from [AEGP_MaskSuite6](aegp-suites.md#aegps-aegp-suites-aegp-masksuite)                                                                                                                                                                                                 |
| `AEGP_RenderOptionsH`      | `AEGP_Dispose`, from [AEGP_RenderQueueMonitorSuite1](aegp-suites.md#aegps-aegp-suites-aegp-renderqueuemonitorsuite)                                                                                                                                                                         |
| `AEGP_LayerRenderOptionsH` | `AEGP_Dispose`, from [AEGP_LayerRenderOptionsSuite1](aegp-suites.md#aegps-aegp-suites-aegp-layerrenderoptionssuite)                                                                                                                                                                         |
| `AEGP_RenderReceiptH`      | `AEGP_DisposeRenderReceipt`, from [AEGP_CanvasSuite8](../artisans/artisan-data-types.md#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                                       |
