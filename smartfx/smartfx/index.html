
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ae-plugins.docsforadobe.dev/smartfx/smartfx/">
      
      
        <link rel="prev" href="../../effect-details/compute-cache-api/">
      
      
        <link rel="next" href="../../effect-ui-events/effect-ui-events/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>SmartFX - After Effects C++ SDK Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../_static/extra.css">
    
      <link rel="stylesheet" href="../../docs/_global/css/global.css">
    
      <link rel="stylesheet" href="../../docs/_global/css/global-syntax-highlight.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#smartfx" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
  Welcome to the new docsforadobe guide!

  This is a work in progress.

  Please provide all feedback via
  <a ref="me" href="https://github.com/orgs/docsforadobe/discussions">
    <span class="twemoji">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 1h8.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 10.25 10H7.061l-2.574 2.573A1.458 1.458 0 0 1 2 11.543V10h-.25A1.75 1.75 0 0 1 0 8.25v-5.5C0 1.784.784 1 1.75 1M1.5 2.75v5.5c0 .138.112.25.25.25h1a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.75.75 0 0 1 .53-.22h3.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25m13 2a.25.25 0 0 0-.25-.25h-.5a.75.75 0 0 1 0-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 14.25 12H14v1.543a1.458 1.458 0 0 1-2.487 1.03L9.22 12.28a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l2.22 2.22v-2.19a.75.75 0 0 1 .75-.75h1a.25.25 0 0 0 .25-.25Z"/></svg>
    </span>
    <strong>the org's discussion forum</strong>
  </a>.

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://docsforadobe.dev" title="After Effects C++ SDK Guide" class="md-header__button md-logo" aria-label="After Effects C++ SDK Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            After Effects C++ SDK Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SmartFX
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/docsforadobe/after-effects-plugin-guide/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    after-effects-plugin-guide
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://docsforadobe.dev" title="After Effects C++ SDK Guide" class="md-nav__button md-logo" aria-label="After Effects C++ SDK Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    After Effects C++ SDK Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/docsforadobe/after-effects-plugin-guide/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    after-effects-plugin-guide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version History
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/what-can-i-do/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What Can I Do With This SDK?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/other-integration-possibilities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other Integration Possibilities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/sdk-audience/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SDK Audience
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/whats-new/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's New
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/how-to-start-creating-plug-ins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How To Start Creating Plug-ins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/sample-projects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sample Projects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/debugging-plug-ins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging Plug-ins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/compatibility-across-multiple-versions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compatibility Across Multiple Versions?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/third-party-plug-in-hosts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Third-party Plug-in Hosts?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/pipl-resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PiPL Resources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/where-installers-should-put-plug-ins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Where Installers Should Put Plug-ins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/localization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Localization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/apple-silicon-support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apple Silicon Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/symbol-export/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exporting Symbols in Effects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intro/next-steps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Next Steps
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Effect Basics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Effect Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/effect-basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Effect Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/entry-point/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Entry Point
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/command-selectors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command Selectors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/PF_InData/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PF_InData
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/PF_OutData/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PF_OutData
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/PF_ParamDef/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PF_ParamDef
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/PF_EffectWorld/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PF_EffectWorld / PF_LayerDef
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-basics/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errors
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Effect Details
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Effect Details
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/multi-frame-rendering-in-ae/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Frame Rendering in AE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/effect-details/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Effect Details
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/accessing-function-suites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing the After Effects Function Suites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/memory-allocation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory Allocation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/image-buffer-management-functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Buffer Management Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/iteration-suites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Iteration Suites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/graphics-utility-suites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphics Utility Suites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/interaction-callback-functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interaction Callback Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/pixel-aspect-ratio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pixel Aspect Ratio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/parameters-floating-point-values/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parameters & Floating Point Values
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/parameter-supervision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parameter Supervision
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/global-sequence-frame-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Global, Sequence, & Frame Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/arbitrary-data-parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arbitrary Data Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/useful-utility-functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Useful Utility Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/motion-blur/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motion Blur
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/working-with-paths/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working With Paths
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/accessing-camera-light-information/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing Camera & Light Information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/color-space-conversion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Color Space Conversion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/changing-parameter-orders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changing Parameter Orders, the Nice Way
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/tips-tricks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips & Tricks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-details/compute-cache-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compute Cache API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SmartFX
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            SmartFX
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    SmartFX
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    SmartFX
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Page Contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page Contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
	<a href="#the-way-things-were" class="md-nav__link">
		<span class="md-ellipsis">
			The Way Things Were
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#the-way-things-are-now" class="md-nav__link">
		<span class="md-ellipsis">
			The Way Things Are Now
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#content-bounds" class="md-nav__link">
		<span class="md-ellipsis">
			Content Bounds
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#how-to-smartify" class="md-nav__link">
		<span class="md-ellipsis">
			How To Smartify
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#pf_cmd_smart_pre_render" class="md-nav__link">
		<span class="md-ellipsis">
			PF_Cmd_SMART_PRE_RENDER
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#pf_prerenderextra" class="md-nav__link">
		<span class="md-ellipsis">
			PF_PreRenderExtra
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#preserve_rgb_of_zero_alpha" class="md-nav__link">
		<span class="md-ellipsis">
			preserve_rgb_of_zero_alpha
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#rectangles" class="md-nav__link">
		<span class="md-ellipsis">
			Rectangles
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#the-size-of-a-layer" class="md-nav__link">
		<span class="md-ellipsis">
			The "Size" Of A Layer
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#flag-on-the-play" class="md-nav__link">
		<span class="md-ellipsis">
			Flag On The Play
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#pf_cmd_smart_render" class="md-nav__link">
		<span class="md-ellipsis">
			PF_Cmd_SMART_RENDER
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#pf_smartrenderextra" class="md-nav__link">
		<span class="md-ellipsis">
			PF_SmartRenderExtra
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#when-to-access-layer-parameters" class="md-nav__link">
		<span class="md-ellipsis">
			When To Access Layer Parameters
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#wait-gimme-that-layer-back" class="md-nav__link">
		<span class="md-ellipsis">
			Wait, Gimme That Layer Back!
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Effect UI & Events
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Effect UI & Events
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-ui-events/effect-ui-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Effect UI & Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-ui-events/PF_EventExtra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PF_EventExtra
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-ui-events/PF_EventUnion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PF_EventUnion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-ui-events/custom-ui-and-drawbot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom UI & Drawbot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-ui-events/ui-callbacks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UI Callbacks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../effect-ui-events/tips-and-tricks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips & Tricks
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Audio
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Audio
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../audio/audio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../audio/global-outflags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Global Outflags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../audio/audio-data-structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Data Structures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../audio/audio-specific-float-slider-variables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio-Specific Float Slider Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../audio/accessing-audio-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing Audio Data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../audio/audio-considerations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio Considerations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AEGPs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            AEGPs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aegps/aegps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AEGPs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aegps/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aegps/data-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aegps/implementation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Implementation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aegps/aegp-suites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AEGP Suites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aegps/cheating-effect-usage-of-aegp-suites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheating Effect Usage of AEGP Suites
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aegps/aegp-details/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AEGP Details
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Artisans
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Artisans
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../artisans/artisans/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Artisans
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../artisans/artisan-data-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Artisan Data Types
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AEIOs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            AEIOs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aeios/aeios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AEIOs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aeios/calling-sequence/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calling Sequence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aeios/AEIO_ModuleInfo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AEIO_ModuleInfo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aeios/new-kids-on-the-function-block/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    New Kids On The Function Block
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aeios/implementation-details/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Implementation Details
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Premiere Pro
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Premiere Pro
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/ppro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Premiere Pro & Other Hosts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/plug-in-installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plug-in Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/basic-host-differences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Host Differences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/multithreading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multithreading
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/bigger-differences/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bigger Differences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/plug-ins-reloaded/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plug-Ins... Reloaded
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/premiere-elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Premiere Elements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/unsupported-features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unsupported Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ppro/other-hosts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other Hosts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Page Contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page Contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
	<a href="#the-way-things-were" class="md-nav__link">
		<span class="md-ellipsis">
			The Way Things Were
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#the-way-things-are-now" class="md-nav__link">
		<span class="md-ellipsis">
			The Way Things Are Now
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#content-bounds" class="md-nav__link">
		<span class="md-ellipsis">
			Content Bounds
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#how-to-smartify" class="md-nav__link">
		<span class="md-ellipsis">
			How To Smartify
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#pf_cmd_smart_pre_render" class="md-nav__link">
		<span class="md-ellipsis">
			PF_Cmd_SMART_PRE_RENDER
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#pf_prerenderextra" class="md-nav__link">
		<span class="md-ellipsis">
			PF_PreRenderExtra
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#preserve_rgb_of_zero_alpha" class="md-nav__link">
		<span class="md-ellipsis">
			preserve_rgb_of_zero_alpha
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#rectangles" class="md-nav__link">
		<span class="md-ellipsis">
			Rectangles
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#the-size-of-a-layer" class="md-nav__link">
		<span class="md-ellipsis">
			The "Size" Of A Layer
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#flag-on-the-play" class="md-nav__link">
		<span class="md-ellipsis">
			Flag On The Play
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#pf_cmd_smart_render" class="md-nav__link">
		<span class="md-ellipsis">
			PF_Cmd_SMART_RENDER
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#pf_smartrenderextra" class="md-nav__link">
		<span class="md-ellipsis">
			PF_SmartRenderExtra
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#when-to-access-layer-parameters" class="md-nav__link">
		<span class="md-ellipsis">
			When To Access Layer Parameters
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
        <li class="md-nav__item">
	<a href="#wait-gimme-that-layer-back" class="md-nav__link">
		<span class="md-ellipsis">
			Wait, Gimme That Layer Back!
		</span>
	</a>

	<!-- Table of contents list -->
	
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/docsforadobe/after-effects-plugin-guide/edit/master/docs/smartfx/smartfx.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/docsforadobe/after-effects-plugin-guide/raw/master/docs/smartfx/smartfx.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="smartfx">SmartFX<a class="headerlink" href="#smartfx" title="Permanent link">&para;</a></h1>
<p>The SmartFX API provides bidirectional communication between effects and After Effects, enabling many performance optimizations and providing previously unavailable dependency information. This extension of the effect API is the way to implement 32-bit per channel support in After Effects.</p>
<p>Normal effect plug-ins are given a full-sized input buffer, and asked to render a full-sized output buffer. While output <a href="../../effect-basics/PF_InData/#pf_indata-members">extent_hint</a> specifies the portion of the output buffer that must actually be filled, this scheme is still very inefficient if the effect does not need its entire input. Also, many effects don't use extent hints.</p>
<hr />
<h2 id="the-way-things-were">The Way Things Were<a class="headerlink" href="#the-way-things-were" title="Permanent link">&para;</a></h2>
<p>Consider a blur effect applied to a huge layer which is mostly off-screen, or viewed through a small region of interest, or masked down to a small size. Only a small section of the output needs to be rendered, indicated to the effect using the output extent_hint. Only a small section of the input to be blurred is needed as well - the output extent_hint expanded by the blur radius. However, using the legacy effects API, there is no way for After Effects to know this, so the entire layer is passed to the plug-in. These extra pixels can be extremely expensive and wasteful to compute, especially in the case of prior effects or nested comps.</p>
<hr />
<h2 id="the-way-things-are-now">The Way Things Are Now<a class="headerlink" href="#the-way-things-are-now" title="Permanent link">&para;</a></h2>
<p>SmartFX solves this problem by reversing the calling sequence. The effect is told how much of its output is required, and must explicitly <em>ask</em> the host for the inputs it needs. The render process is split into two parts: pre-render and render.</p>
<p>During pre-render, the effect describes the input pixel data it needs; this necessary input can vary based on anything you like (non-input layer parameters, non-layer parameters, information from in_data, settings in sequence data...). The effect must also return the extent of the resulting output, which may be smaller than the requested size if there are empty pixels in the requested portion of the layer.</p>
<p>During the render stage, the effect can <em>only</em> retrieve pixels that it has previously requested. This two-pass approach facilitates many important optimizations. For example, an effect which multiplies or mattes one input against another might discover that its first input is not</p>
<p>needed at all, if the mask does not intersect it. There are also important optimizations that are performed internally by After Effects to ensure that image buffers are copied as little as possible, and these optimizations are only possible after the host knows the buffer sizes and for all inputs and outputs.</p>
<p>Like AEGPs, SmartFX plug-ins are never unloaded by After Effects.</p>
<hr />
<h2 id="content-bounds">Content Bounds<a class="headerlink" href="#content-bounds" title="Permanent link">&para;</a></h2>
<p>The content bounds of a node are the largest possible result rectangle that can be returned from a call to PreRender. It absolutely cannot vary depending on current render request or anything else. It should be calculated carefully, not loosely.</p>
<p>This calculation is very important. It is an intrinsic property of the node (and its inputs) and is fixed once the graph is built. Violation of it can and probably will cause all sorts of problems in various pieces of code.</p>
<hr />
<h2 id="how-to-smartify">How To Smartify<a class="headerlink" href="#how-to-smartify" title="Permanent link">&para;</a></h2>
<p>Effects which set <code>PF_OutFlag2_SUPPORTS_SMART_RENDER</code> (from <a href="../../effect-basics/PF_OutData/#pf_outflags">PF_OutFlags</a>) will receive the SmartFX calls <code>PF_Cmd_SMART_PRE_RENDER</code> and <code>PF_Cmd_SMART_RENDER</code> (from <a href="../../effect-basics/command-selectors/#frame-selectors">Frame Selectors</a>), instead of the older <code>PF_Cmd_FRAME_SETUP</code> / <code>PF_Cmd_RENDER</code> / <code>PF_Cmd_FRAME_SETDOWN</code> sequence. To preserve compatibility with non-smartified hosts, you may want to continue supporting the older commands too.</p>
<hr />
<h2 id="pf_cmd_smart_pre_render">PF_Cmd_SMART_PRE_RENDER<a class="headerlink" href="#pf_cmd_smart_pre_render" title="Permanent link">&para;</a></h2>
<p>After Effects requests output from the effect. The effect tells After Effects what input it needs to generate that output, through the use of callback functions, and by manipulating the structures in the extra parameter. An effect cannot access the pixels of any layer inputs it has not checked out during <em>PF_Cmd_SMART_PRE_RENDER</em>. So all layer inputs that an effect might possibly need must be checked out in advance using checkout_layer. If an effect might need certain layer inputs, they must be checked out now, even if later during rendering the effect may decide that the layer isn't needed. Also, since no parameter array is passed to SmartFX during <em>PF_Cmd_SMART_PRE_RENDER</em> or <code>PF_Cmd_SMART_RENDER</code>, any non-layer parameters needed must be retrieved using <code>PF_CHECKOUT_PARAM</code> (from <a href="../../effect-details/interaction-callback-functions/#interaction-callbacks">Interaction Callbacks</a>)</p>
<hr />
<h2 id="pf_prerenderextra">PF_PreRenderExtra<a class="headerlink" href="#pf_prerenderextra" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th colspan="1" rowspan="1">
<p>Member</p>
</th>
<th colspan="1" rowspan="1">
<p>Purpose</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="1" rowspan="1">
<p><code>PF_PreRenderInput</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Describes what After Effects needs rendered (in the <code>PF_RenderRequest</code>), and the bit depth requested (in the aptly-named bitdepth member).</p>
<p><div class="language-cpp highlight"><pre><span></span><code><span id="__span-0-1"><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><span class="w">  </span><span class="n">PF_LRect</span><span class="w">        </span><span class="n">rect</span><span class="p">;</span>
</span><span id="__span-0-3"><span class="w">  </span><span class="n">PF_Field</span><span class="w">        </span><span class="n">field</span><span class="p">;</span>
</span><span id="__span-0-4"><span class="w">  </span><span class="n">PF_ChannelMask</span><span class="w">  </span><span class="n">channel_mask</span><span class="p">;</span>
</span><span id="__span-0-5"><span class="w">  </span><span class="n">PF_Boolean</span><span class="w">      </span><span class="n">preserve_rgb_of_zero_alpha</span><span class="p">;</span>
</span><span id="__span-0-6"><span class="w">  </span><span class="kt">char</span><span class="w">            </span><span class="n">unused</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
</span><span id="__span-0-7"><span class="w">  </span><span class="kt">long</span><span class="w">            </span><span class="n">reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
</span><span id="__span-0-8"><span class="p">}</span><span class="w"> </span><span class="n">PF_RenderRequest</span><span class="p">;</span>
</span></code></pre></div></p>
<p><code>rect</code> is in layer coordinates. field is also relative to the layer origin; whether the active field falls on even or odd scanlines of the output buffer depends on the origin of the output buffer.</p>
<p><code>channel_mask</code> specifies for which channels the effect should provide output.</p>
<p>Data written to other channels will not be honored.</p>
<p>It will be one or more of the following, or'd together:</p>
<ul>
<li><code>PF_ChannelMask_ALPHA</code></li>
<li><code>PF_ChannelMask_RED</code></li>
<li><code>PF_ChannelMask_GREEN</code></li>
<li><code>PF_ChannelMask_BLUE</code></li>
<li><code>PF_ChannelMask_ARGB</code></li>
</ul>
<p>If <code>preserve_rgb_of_zero_alpha</code> pixels is <code>TRUE</code>, the effect must propagate the color content of transparent pixels through to the output.</p>
<p>This is related to, but distinct from, <a href="../../effect-basics/PF_OutData/#pf_outflags">PF_OutFlag2_REVEALS_ZERO_ALPHA</a>, which tells After Effects that the effect may set alpha to non-zero values for such pixels, restoring them to visibility.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>PF_PreRenderOutput</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Filled in by the effect to tell After Effects what output it plans to generate, based on the input.</p>
<p><div class="language-cpp highlight"><pre><span></span><code><span id="__span-0-1"><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><span class="w">  </span><span class="n">PF_LRect</span><span class="w">                    </span><span class="n">result_rect</span><span class="p">;</span>
</span><span id="__span-0-3"><span class="w">  </span><span class="n">PF_LRect</span><span class="w">                    </span><span class="n">max_result_rect</span><span class="p">;</span>
</span><span id="__span-0-4"><span class="w">  </span><span class="n">PF_Boolean</span><span class="w">                  </span><span class="n">solid</span><span class="p">;</span>
</span><span id="__span-0-5"><span class="w">  </span><span class="n">PF_Boolean</span><span class="w">                  </span><span class="n">reserved</span><span class="p">;</span>
</span><span id="__span-0-6"><span class="w">  </span><span class="n">PF_RenderOutputFlags</span><span class="w">        </span><span class="n">flags</span><span class="p">;</span>
</span><span id="__span-0-7"><span class="w">  </span><span class="kt">void</span><span class="o">*</span><span class="w">                       </span><span class="n">pre_render_data</span><span class="p">;</span>
</span><span id="__span-0-8"><span class="w">  </span><span class="n">PF_DeletePreRenderDataFunc</span><span class="w">  </span><span class="n">func</span><span class="p">;</span>
</span><span id="__span-0-9"><span class="p">}</span><span class="w"> </span><span class="n">PF_PreRenderOutput</span><span class="p">;</span>
</span></code></pre></div></p>
<p><code>pre_render_data</code> will be passed back to the effect during <a href="../../effect-basics/command-selectors/#frame-selectors">PF_Cmd_SMART_RENDER</a>.</p>
<p>Currently, the only <code>PF_RenderOutputFlags</code> is <code>PF_RenderOutputFlag_RETURNS_EXTRA_PIXELS</code>.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>PF_PreRenderCallbacks</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Currently, there is only one callback - <code>checkout_layer</code>. checkout_idL is chosen by the effect.</p>
<p>It must be positive and unique. After Effects populates the <code>PF_CheckoutResult</code>.</p>
<p><div class="language-cpp highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">PF_Err</span><span class="w"> </span><span class="nf">checkout_layer</span><span class="p">(</span>
</span><span id="__span-0-2"><span class="w">  </span><span class="n">PF_ProgPtr</span><span class="w">              </span><span class="n">effect_ref</span><span class="p">,</span>
</span><span id="__span-0-3"><span class="w">  </span><span class="n">PF_ParamIndex</span><span class="w">           </span><span class="n">index</span><span class="p">,</span>
</span><span id="__span-0-4"><span class="w">  </span><span class="n">A_long</span><span class="w">                  </span><span class="n">checkout_idL</span><span class="p">,</span>
</span><span id="__span-0-5"><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">PF_RenderRequest</span><span class="w">  </span><span class="o">*</span><span class="n">req</span><span class="p">,</span>
</span><span id="__span-0-6"><span class="w">  </span><span class="n">A_long</span><span class="w">                  </span><span class="n">what_time</span><span class="p">,</span>
</span><span id="__span-0-7"><span class="w">  </span><span class="n">A_long</span><span class="w">                  </span><span class="n">time_step</span><span class="p">,</span>
</span><span id="__span-0-8"><span class="w">  </span><span class="n">A_u_long</span><span class="w">                </span><span class="n">time_scale</span><span class="p">,</span>
</span><span id="__span-0-9"><span class="n">PF_CheckoutResult</span><span class="w">       </span><span class="o">*</span><span class="n">result</span><span class="p">);</span>
</span><span id="__span-0-10">
</span><span id="__span-0-11"><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-12"><span class="w">  </span><span class="n">PF_LRect</span><span class="w">          </span><span class="n">result_rect</span><span class="p">;</span>
</span><span id="__span-0-13"><span class="w">  </span><span class="n">PF_LRect</span><span class="w">          </span><span class="n">max_result_rect</span><span class="p">;</span>
</span><span id="__span-0-14"><span class="w">  </span><span class="n">PF_RationalScale</span><span class="w">  </span><span class="n">par</span><span class="p">;</span>
</span><span id="__span-0-15"><span class="w">  </span><span class="kt">long</span><span class="w">              </span><span class="n">solid</span><span class="p">;</span>
</span><span id="__span-0-16"><span class="w">  </span><span class="n">PF_Boolean</span><span class="w">        </span><span class="n">reservedB</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
</span><span id="__span-0-17"><span class="w">  </span><span class="n">A_long</span><span class="w">            </span><span class="n">ref_width</span><span class="p">;</span>
</span><span id="__span-0-18"><span class="w">  </span><span class="n">A_long</span><span class="w">            </span><span class="n">ref_height</span><span class="p">;</span>
</span><span id="__span-0-19"><span class="p">}</span><span class="w"> </span><span class="n">PF_CheckoutResult</span><span class="p">;</span>
</span></code></pre></div></p>
<p><code>result_rect</code> can be empty. <code>max_result_rect</code> is the largest the output could possibly be, if the host asked for all of it.</p>
<p>If solid is <code>TRUE</code>, the entire result_rect has opaque alpha.</p>
<p><code>ref_width</code> and <code>ref_height</code> are the original dimensions of the layer, before any effects are applied, disregarding any downsample factors.</p>
<p>This will be the size of the composition for collapsed layers.</p>
<p>There is a bug in 11.0 with the Global Performance Cache, when a SmartFX effect uses both <a href="../../effect-basics/PF_OutData/#pf_outflags">PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT</a> &amp; <a href="../../effect-basics/PF_OutData/#pf_outflags">PF_OutFlag_NON_PARAM_VARY</a>.</p>
<p>Calling checkout_layer during <code>PF_Cmd_SMART_PRE_RENDER</code> returns empty rects in <code>PF_CheckoutResult</code>.</p>
<p>The workaround is to simply make the call again. This workaround is no longer needed in 11.0.1.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>result_rect</code></p>
</td>
<td colspan="1" rowspan="1">
<p>The output (in layer coordinates) resulting from the render request (can be empty).</p>
<p>This cannot be bigger than the input request rectangle (unless <code>PF_RenderOutputFlag_RETURNS_EXTRA_PIXELS</code> is set), but can be smaller.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>max_result_rect</code></p>
</td>
<td colspan="1" rowspan="1">
<p>The maximum size the output could possibly be, if After Effects requested all of it.</p>
<p>This must not vary depending on requested output size.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>solid</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Set this <code>TRUE</code> if every pixel in the output will be fully opaque. Set if possible; it enables certain optimizations.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>reserved</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Ignore.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>flags</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Currently, the only flag is <code>PF_RenderOutputFlag_RETURNS_EXTRA_PIXELS</code>, which tells After Effects that the smart effect will return more pixels than After Effects requested.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>pre_render_data</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Point this at any data that the effect would like to access during rendering.</p>
<p>Effects can also allocate handles and store them in <code>out_data&gt;frame_data</code>, as with regular (non-smart) effects.</p>
<p>Since <a href="../../effect-basics/command-selectors/#frame-selectors">PF_Cmd_SMART_PRE_RENDER</a> can be called with no corresponding <a href="../../effect-basics/command-selectors/#frame-selectors">PF_Cmd_SMART_RENDER</a>, effects must never delete this data themselves; once the effect returns from <a href="../../effect-basics/command-selectors/#frame-selectors">PF_Cmd_SMART_PRE_RENDER</a>, After Effects owns this data and will dispose of it (using either the following function or a standard free call).</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>delete_pre_render_data_func</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Point this to a function that will eventually be called to delete the pre_render_data.</p>
</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="preserve_rgb_of_zero_alpha">preserve_rgb_of_zero_alpha<a class="headerlink" href="#preserve_rgb_of_zero_alpha" title="Permanent link">&para;</a></h2>
<p><code>preserve_rgb_of_zero_alpha</code> is used both as input to the effect, to tell it what to render, and as output from the effect, to describe the input it needs (as passed to the checkout call). When preserve_rgb_of_zero_alpha is set in an input request, the effect must pass it recursively when making checkouts, otherwise prior effects and masking will eliminate those pixels that the effect would reveal. Use of this is discouraged, though still supported in CS3 (8.0).</p>
<hr />
<h2 id="rectangles">Rectangles<a class="headerlink" href="#rectangles" title="Permanent link">&para;</a></h2>
<p>Effects must set both result rectangles accurately. After Effects' caching system relies upon them, incorrect values can cause many problems. If the plug-in returns a <code>result_rect</code> smaller than the request_rect, that tells After Effects the pixels inside the request_rect but outside the <code>result_rect</code> are empty.</p>
<p>Similarly, <code>max_result_rect</code> must encompass all non-zero pixels; the effect will never be asked to render anything outside this region. If there are pixels outside this rectangle, they will never be displayed.</p>
<p>Mis-sized output rectangles can cause problems as well. If these rectangles are too big, a loss of performance results.</p>
<p>Not only will many empty pixels be cached (robbing the application of valuable memory), the effect may be unnecessarily asked to render large regions of nothing. For this reason, the <code>max_result_rect</code> must be computed correctly, rather than set to some arbitrarily large size.</p>
<p>Both <code>result_rect</code> and <code>max_result_rect</code> may vary depending on the effect's parameters, the current time, et cetera; they are valid only for the given invocation of the effect. However, <code>max_result_rect</code> <em>cannot</em> depend on the specific render request. It must be the same no matter what portion of the output is requested by After Effects.</p>
<p>It is legal to return an empty <code>result_rect</code> if the request_rect doesn't intersect the effect's output pixels; no rendering need be done.</p>
<p>After Effects may also call the effect with an empty request_rect, meaning the effect is only being asked to compute the <code>max_result_rect</code>.</p>
<p><code>preserve_rgb_of_zero_alpha</code> can influence the bounds computation process (both result_rect and <code>max_result_rect</code>) and must be respected if the effect behaves differently depending on this setting.</p>
<hr />
<h2 id="the-size-of-a-layer">The "Size" Of A Layer<a class="headerlink" href="#the-size-of-a-layer" title="Permanent link">&para;</a></h2>
<p>As with non-smart effects, each smart effect can arbitrarily shrink or expand its requested input. They cannot depend on a fixed frame size, and the size of the input may change over time.</p>
<p>For example, the user could apply an animated drop shadow to a layer, which would add pixels to different edges of the layer at different times, depending on the direction in which the shadow is cast.</p>
<p>Some effects (for example, those which need to align one layer against another) need some notion of "size." This could be defined two ways, each with advantages and disadvantages.</p>
<p>The size of the original layer, before any effects and downsampling are applied, is given <code>in_data&gt;width/height</code>. As this value is unaffected by subsequent effects, it can act an absolute reference for things like center points.</p>
<p>However, this is not fool-proof, as the user could have applied a distortion or translation effect. Also, this value is available only for the layer to which the effect is applied, not other layer parameters.</p>
<p>...or...</p>
<p>Every layer input has a <code>max_result_rect</code> which encompasses all pixel data, in some sense the master "size" of a layer.</p>
<p>It is available for all layers, but changes over time according to previously applied effects, possibly in ways the user might not expect (as in the drop shadow example above).</p>
<p>Note that the ref_width/height and <code>max_result_rect</code> for an input may be obtained without rendering, by calling <code>checkout_layer</code> with an empty <code>request_rect</code>.</p>
<p>This is fairly efficient, and can be useful if the layer "size" is needed first to determine exactly which pixels are required for rendering.</p>
<p>This is an example of requesting a layer in pre-render and then never calling <code>checkout_layer</code> (in this case, there are none).</p>
<hr />
<h2 id="flag-on-the-play">Flag On The Play<a class="headerlink" href="#flag-on-the-play" title="Permanent link">&para;</a></h2>
<p>Normally, the <code>max_result_rect</code> of a given <code>PF_RenderRequest</code> will be cropped to the bounds of any applied mask.</p>
<p>However, if <a href="../../effect-basics/PF_OutData/#pf_outflags2">PF_OutFlag2_REVEALS_ZERO_ALPHA</a> is set, the <code>max_result_rect</code> will be the size of the layer.</p>
<hr />
<h2 id="pf_cmd_smart_render">PF_Cmd_SMART_RENDER<a class="headerlink" href="#pf_cmd_smart_render" title="Permanent link">&para;</a></h2>
<p>The effect will receive at most one <em>PF_Cmd_SMART_RENDER</em> call for each pre-render.</p>
<p>Note that render may never be called at all. After Effects may have only wanted to to perform some bounds computations, or it may have subsequently discovered that an effect's output is not needed at all (which can happen, for example, if the pre-render phase for a track matte returns a rectangle that does not intersect the effect's output.)</p>
<p>All effects must be able to handle Pre-Render without Render without leaking resources or otherwise entering an unstable state.</p>
<p>During <em>PF_Cmd_SMART_RENDER</em>, the extra parameter points to a PF_SmartRenderExtra.</p>
<hr />
<h2 id="pf_smartrenderextra">PF_SmartRenderExtra<a class="headerlink" href="#pf_smartrenderextra" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th colspan="1" rowspan="1">
<p>Member</p>
</th>
<th colspan="1" rowspan="1">
<p>Purpose</p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="1" rowspan="1">
<p><code>PF_SmartRenderInput</code></p>
</td>
<td colspan="1" rowspan="1">
<p>Consists of a <a href="#pf_prerenderextra">PF_RenderRequest</a>, the bitdepth, and a pointer to <code>pre_render_data</code> (allocated during <a href="../../effect-basics/command-selectors/#frame-selectors">PF_Cmd_SMART_PRE_RENDER</a>).</p>
<p>This <code>PF_SmartRenderInput</code> is identical to that passed in the corresponding <em>PF_Cmd_SMART_PRE_RENDER</em>.</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p><code>PF_SmartRenderCallbacks</code></p>
</td>
<td colspan="1" rowspan="1">
<p><div class="language-cpp highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">PF_Err</span><span class="w"> </span><span class="nf">checkout_layer_pixels</span><span class="p">(</span>
</span><span id="__span-0-2"><span class="w">  </span><span class="n">PF_ProgPtr</span><span class="w">      </span><span class="n">effect_ref</span><span class="p">,</span>
</span><span id="__span-0-3"><span class="w">  </span><span class="n">A_long</span><span class="w">          </span><span class="n">checkout_idL</span><span class="p">,</span>
</span><span id="__span-0-4"><span class="w">  </span><span class="n">PF_EffectWorld</span><span class="w">  </span><span class="o">*</span><span class="n">pixels</span><span class="p">);</span>
</span></code></pre></div></p>
<p>This is used to actually access the pixels in layers checked out during <em>PF_Cmd_SMART_PRE_RENDER</em>.</p>
<p>The returned <code>PF_EffectWorld</code> is valid for duration of current command or until checked in.</p>
<p>You are only allowed to call <code>checkout_layer_pixels</code> only once with the checkout_idL used earlier in <em>PF_Cmd_SMART_PRERENDER</em>.</p>
<p>There must be a one-to-one mapping between the number of checkouts made in <em>PF_Cmd_SMART_PRERENDER</em> and <em>PF_Cmd_SMART_RENDER</em>.</p>
<p>To call <code>checkout_layer_pixels</code> more than once on a layer, you should call <a href="#pf_prerenderextra">checkout_layer</a> on the same layer again with a different unique <code>checkout_idL</code> in <em>PF_Cmd_SMART_PRERENDER</em> and then use that <code>checkout_idL</code> to do another <code>checkout_layer_pixels</code> in <em>PF_Cmd_SMART_RENDER</em>.</p>
<p><div class="language-cpp highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">PF_Err</span><span class="w"> </span><span class="nf">checkin_layer_pixels</span><span class="p">(</span>
</span><span id="__span-0-2"><span class="w">  </span><span class="n">PF_ProgPtr</span><span class="w">  </span><span class="n">effect_ref</span><span class="p">,</span>
</span><span id="__span-0-3"><span class="w">  </span><span class="n">A_long</span><span class="w">      </span><span class="n">checkout_idL</span><span class="p">);</span>
</span></code></pre></div></p>
<p>It isn't necessary to call (After Effects cleans up all such checkouts when the effect returns from <em>PF_Cmd_SMART_RENDER</em>), but useful to free up memory.</p>
<p><div class="language-cpp highlight"><pre><span></span><code><span id="__span-0-1"><span class="n">PF_Err</span><span class="w"> </span><span class="nf">checkout_output</span><span class="p">(</span>
</span><span id="__span-0-2"><span class="w">  </span><span class="n">PF_ProgPtr</span><span class="w">      </span><span class="n">effect_ref</span><span class="p">,</span>
</span><span id="__span-0-3"><span class="w">  </span><span class="n">PF_EffectWorld</span><span class="w">  </span><span class="o">*</span><span class="n">output</span><span class="p">);</span>
</span></code></pre></div></p>
<p>Retrieves the output buffer. Note that effects are not allowed to check out output until at least one input has been checked out (unless the effect has no inputs at all).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For optimal memory usage, request the output as late as possible, and request inputs as few at a time as possible.</p>
</div>
</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="when-to-access-layer-parameters">When To Access Layer Parameters<a class="headerlink" href="#when-to-access-layer-parameters" title="Permanent link">&para;</a></h2>
<p>Parameters other than layer inputs may be freely checked out at any point. Layer inputs must be accessed during <a href="../../effect-basics/command-selectors/#frame-selectors">PF_Cmd_SMART_PRE_RENDER</a>.</p>
<p>However, you aren't required to actually <em>use</em> every input.</p>
<p>If you check out a frame (or portion thereof) in <a href="../../effect-basics/command-selectors/#frame-selectors">PF_Cmd_SMART_PRE_RENDER</a> and do not subsequently check it out in <code>PF_Cmd_SMART_RENDER</code>, it need never be rendered, greatly improving performance.</p>
<hr />
<h2 id="wait-gimme-that-layer-back">Wait, Gimme That Layer Back!<a class="headerlink" href="#wait-gimme-that-layer-back" title="Permanent link">&para;</a></h2>
<p><code>checkout_layer_pixels</code> can only be called once with the checkout_id used earlier in PreRender. There has to be a one-to-one mapping on the number of checkouts made in PreRender and SmartRender. If you need to check out the pixels of a layer more than once, perhaps because of the structure of your code, just use more than one checkout_id. In PreRender, call checkout_layer on the same layer with different unique checkout_ids. Then in SmartRender, use a different one of those checkout_ids each time checkout_layer_pixels is called in SmartRender.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 11, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      All content is copyright Adobe Systems Incorporated.
    </div>
  
  
    Made with
    <a
      href="https://squidfunk.github.io/mkdocs-material/"
      target="_blank" rel="noopener"
    >
      Material for MkDocs
    </a>
  
</div>

<!-- Print button -->
<div class="md-copyright">
  
  <a href="../../print_page/" title="Print Site" class="md-content__button md-icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3H6v4h12m1 5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m-3 7H8v-5h8m3-6H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3"/></svg>
  </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.copy", "search.highlight", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../_static/extra.js"></script>
      
        <script src="../../docs/_global/js/global.js"></script>
      
    
  </body>
</html>